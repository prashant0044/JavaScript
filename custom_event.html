<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Custom Event Test</title>
</head>
<body>
  <input type="text" id="uname" placeholder="Enter username">
  <button id="submit">Submit</button>

  <script>
    const username = document.getElementById("uname");
    const submit = document.getElementById("submit");

    // Listen for the custom event on the document
    document.addEventListener("unamesubmitted", function(event) {
      console.log("Event received!");
      console.log(`username ${event.detail.text} has been submitted`);
    });

    // On button click, dispatch the event
    submit.addEventListener("click", function() {
      console.log("Button clicked!");
      const unamesubmitted = new CustomEvent("unamesubmitted", {
        bubbles: true,
        cancelable: true,
        detail: { text: username.value }
      });
      document.dispatchEvent(unamesubmitted);
    });
  </script>
</body>
</html>
